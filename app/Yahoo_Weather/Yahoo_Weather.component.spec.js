'use strict';

describe('cityList', function () {

    // Load the module that contains the `cityList` component before each test
    beforeEach(module('cityList'));

    // Test the controller
    describe('CityListController', function () {
        var $httpBackend, ctrl;

        beforeEach(inject(function ($componentController, _$httpBackend_) {
            $httpBackend = _$httpBackend_;
            $httpBackend.expectGET('Yahoo_Cities/Cities_PT.json').respond([{"cityName":"Águeda"},{"cityName":"Évora"},{"cityName":"Ílhavo"},{"cityName":"Óbidos"},{"cityName":"Abrantes"},{"cityName":"Aguiar da Beira"},{"cityName":"Alandroal"},{"cityName":"Albergaria-a-Velha"},{"cityName":"Albufeira"},{"cityName":"Alcácer do Sal"},{"cityName":"Alcanena"},{"cityName":"Alcobaça"},{"cityName":"Alcochete"},{"cityName":"Alcoutim"},{"cityName":"Alenquer"},{"cityName":"Alfândega da Fé"},{"cityName":"Alijó"},{"cityName":"Aljezur"},{"cityName":"Aljustrel"},{"cityName":"Almada"},{"cityName":"Almeida"},{"cityName":"Almeirim"},{"cityName":"Almodôvar"},{"cityName":"Alpiarça"},{"cityName":"Alter do Chão"},{"cityName":"Alvaiázere"},{"cityName":"Alvito"},{"cityName":"Amadora"},{"cityName":"Amarante"},{"cityName":"Amares"},{"cityName":"Anadia"},{"cityName":"Angra do Heroísmo"},{"cityName":"Ansião"},{"cityName":"Arcos de Valdevez"},{"cityName":"Arganil"},{"cityName":"Armamar"},{"cityName":"Arouca"},{"cityName":"Arraiolos"},{"cityName":"Arronches"},{"cityName":"Arruda dos Vinhos"},{"cityName":"Aveiro"},{"cityName":"Avis"},{"cityName":"Azambuja"},{"cityName":"Baião"},{"cityName":"Barcelos"},{"cityName":"Barrancos"},{"cityName":"Barreiro"},{"cityName":"Batalha"},{"cityName":"Beja"},{"cityName":"Belmonte"},{"cityName":"Benavente"},{"cityName":"Bombarral"},{"cityName":"Borba"},{"cityName":"Boticas"},{"cityName":"Braga"},{"cityName":"Bragança"},{"cityName":"Câmara de Lobos"},{"cityName":"Cabeceiras de Basto"},{"cityName":"Cadaval"},{"cityName":"Caldas da Rainha"},{"cityName":"Calheta"},{"cityName":"Caminha"},{"cityName":"Campo Maior"},{"cityName":"Cantanhede"},{"cityName":"Carrazeda de Ansiães"},{"cityName":"Carregal do Sal"},{"cityName":"Cartaxo"},{"cityName":"Cascais"},{"cityName":"Castanheira de Pêra"},{"cityName":"Castelo Branco"},{"cityName":"Castelo de Paiva"},{"cityName":"Castelo de Vide"},{"cityName":"Castro Daire"},{"cityName":"Castro Marim"},{"cityName":"Castro Verde"},{"cityName":"Celorico da Beira"},{"cityName":"Celorico de Basto"},{"cityName":"Chamusca"},{"cityName":"Chaves"},{"cityName":"Cinfães"},{"cityName":"Coimbra"},{"cityName":"Condeixa-a-Nova"},{"cityName":"Constância"},{"cityName":"Coruche"},{"cityName":"Corvo"},{"cityName":"Covilhã"},{"cityName":"Crato"},{"cityName":"Cuba"},{"cityName":"Elvas"},{"cityName":"Entroncamento"},{"cityName":"Espinho"},{"cityName":"Esposende"},{"cityName":"Estarreja"},{"cityName":"Estremoz"},{"cityName":"Fafe"},{"cityName":"Faro"},{"cityName":"Felgueiras"},{"cityName":"Ferreira do Alentejo"},{"cityName":"Ferreira do Zêzere"},{"cityName":"Figueiró dos Vinhos"},{"cityName":"Figueira da Foz"},{"cityName":"Figueira de Castelo Rodrigo"},{"cityName":"Fornos de Algodres"},{"cityName":"Freixo de Espada à Cinta"},{"cityName":"Fronteira"},{"cityName":"Funchal"},{"cityName":"Fundão"},{"cityName":"Góis"},{"cityName":"Gavião"},{"cityName":"Golegã"},{"cityName":"Gondomar"},{"cityName":"Gouveia"},{"cityName":"Grândola"},{"cityName":"Guarda"},{"cityName":"Guimarães"},{"cityName":"Horta"},{"cityName":"Idanha-a-Nova"},{"cityName":"Lagoa"},{"cityName":"Lagos"},{"cityName":"Lajes das Flores"},{"cityName":"Lajes do Pico"},{"cityName":"Lamego"},{"cityName":"Leiria"},{"cityName":"Lisboa"},{"cityName":"Loulé"},{"cityName":"Loures"},{"cityName":"Lourinhã"},{"cityName":"Lousã"},{"cityName":"Lousada"},{"cityName":"Mértola"},{"cityName":"Mêda"},{"cityName":"Mação"},{"cityName":"Macedo de Cavaleiros"},{"cityName":"Machico"},{"cityName":"Madalena"},{"cityName":"Mafra"},{"cityName":"Maia"},{"cityName":"Mangualde"},{"cityName":"Manteigas"},{"cityName":"Marco de Canaveses"},{"cityName":"Marinha Grande"},{"cityName":"Marvão"},{"cityName":"Matosinhos"},{"cityName":"Mealhada"},{"cityName":"Melgaço"},{"cityName":"Mesão Frio"},{"cityName":"Mira"},{"cityName":"Miranda do Corvo"},{"cityName":"Miranda do Douro"},{"cityName":"Mirandela"},{"cityName":"Mogadouro"},{"cityName":"Moimenta da Beira"},{"cityName":"Moita"},{"cityName":"Monção"},{"cityName":"Monchique"},{"cityName":"Mondim de Basto"},{"cityName":"Monforte"},{"cityName":"Montalegre"},{"cityName":"Montemor-o-Novo"},{"cityName":"Montemor-o-Velho"},{"cityName":"Montijo"},{"cityName":"Mora"},{"cityName":"Mortágua"},{"cityName":"Mourão"},{"cityName":"Moura"},{"cityName":"Murça"},{"cityName":"Murtosa"},{"cityName":"Nazaré"},{"cityName":"Nelas"},{"cityName":"Nisa"},{"cityName":"Nordeste"},{"cityName":"Odemira"},{"cityName":"Odivelas"},{"cityName":"Oeiras"},{"cityName":"Oleiros"},{"cityName":"Olhão"},{"cityName":"Oliveira de Azeméis"},{"cityName":"Oliveira de Frades"},{"cityName":"Oliveira do Bairro"},{"cityName":"Oliveira do Hospital"},{"cityName":"Ourém"},{"cityName":"Ourique"},{"cityName":"Ovar"},{"cityName":"Póvoa de Lanhoso"},{"cityName":"Póvoa de Varzim"},{"cityName":"Paços de Ferreira"},{"cityName":"Palmela"},{"cityName":"Pampilhosa da Serra"},{"cityName":"Paredes"},{"cityName":"Paredes de Coura"},{"cityName":"Pedrógão Grande"},{"cityName":"Penacova"},{"cityName":"Penafiel"},{"cityName":"Penalva do Castelo"},{"cityName":"Penamacor"},{"cityName":"Penedono"},{"cityName":"Penela"},{"cityName":"Peniche"},{"cityName":"Peso da Régua"},{"cityName":"Pinhel"},{"cityName":"Pombal"},{"cityName":"Ponta Delgada"},{"cityName":"Ponta do Sol"},{"cityName":"Ponte da Barca"},{"cityName":"Ponte de Lima"},{"cityName":"Ponte de Sor"},{"cityName":"Portalegre"},{"cityName":"Portel"},{"cityName":"Portimão"},{"cityName":"Porto"},{"cityName":"Porto de Mós"},{"cityName":"Porto Moniz"},{"cityName":"Porto Santo"},{"cityName":"Povoação"},{"cityName":"Proença-a-Nova"},{"cityName":"Redondo"},{"cityName":"Reguengos de Monsaraz"},{"cityName":"Resende"},{"cityName":"Ribeira Brava"},{"cityName":"Ribeira de Pena"},{"cityName":"Ribeira Grande"},{"cityName":"Rio Maior"},{"cityName":"Sátão"},{"cityName":"São Brás de Alportel"},{"cityName":"São João da Madeira"},{"cityName":"São João da Pesqueira"},{"cityName":"São Pedro do Sul"},{"cityName":"São Roque do Pico"},{"cityName":"São Vicente"},{"cityName":"Sabrosa"},{"cityName":"Sabugal"},{"cityName":"Salvaterra de Magos"},{"cityName":"Santa Comba Dão"},{"cityName":"Santa Cruz"},{"cityName":"Santa Cruz da Graciosa"},{"cityName":"Santa Cruz das Flores"},{"cityName":"Santa Maria da Feira"},{"cityName":"Santa Marta de Penaguião"},{"cityName":"Santana"},{"cityName":"Santarém"},{"cityName":"Santiago do Cacém"},{"cityName":"Santo Tirso"},{"cityName":"Sardoal"},{"cityName":"Seia"},{"cityName":"Seixal"},{"cityName":"Sernancelhe"},{"cityName":"Serpa"},{"cityName":"Sertã"},{"cityName":"Sesimbra"},{"cityName":"Setúbal"},{"cityName":"Sever do Vouga"},{"cityName":"Silves"},{"cityName":"Sines"},{"cityName":"Sintra"},{"cityName":"Sobral de Monte Agraço"},{"cityName":"Soure"},{"cityName":"Sousel"},{"cityName":"Tábua"},{"cityName":"Tabuaço"},{"cityName":"Tarouca"},{"cityName":"Tavira"},{"cityName":"Terras de Bouro"},{"cityName":"Tomar"},{"cityName":"Tondela"},{"cityName":"Torre de Moncorvo"},{"cityName":"Torres Novas"},{"cityName":"Torres Vedras"},{"cityName":"Trancoso"},{"cityName":"Trofa"},{"cityName":"Vagos"},{"cityName":"Vale de Cambra"},{"cityName":"Valença"},{"cityName":"Valongo"},{"cityName":"Valpaços"},{"cityName":"Velas"},{"cityName":"Vendas Novas"},{"cityName":"Viana do Alentejo"},{"cityName":"Viana do Castelo"},{"cityName":"Vidigueira"},{"cityName":"Vieira do Minho"},{"cityName":"Vila da Praia da Vitória"},{"cityName":"Vila de Rei"},{"cityName":"Vila do Bispo"},{"cityName":"Vila do Conde"},{"cityName":"Vila do Porto"},{"cityName":"Vila Flor"},{"cityName":"Vila Franca de Xira"},{"cityName":"Vila Franca do Campo"},{"cityName":"Vila Nova da Barquinha"},{"cityName":"Vila Nova de Cerveira"},{"cityName":"Vila Nova de Famalicão"},{"cityName":"Vila Nova de Foz Côa"},{"cityName":"Vila Nova de Gaia"},{"cityName":"Vila Nova de Paiva"},{"cityName":"Vila Nova de Poiares"},{"cityName":"Vila Pouca de Aguiar"},{"cityName":"Vila Real"},{"cityName":"Vila Real de Santo António"},{"cityName":"Vila Velha de Ródão"},{"cityName":"Vila Verde"},{"cityName":"Vila Viçosa"},{"cityName":"Vimioso"},{"cityName":"Vinhais"},{"cityName":"Viseu"},{"cityName":"Vizela"},{"cityName":"Vouzela"}]);

            ctrl = $componentController('cityList');
        }));

        it('should create a `cities` array with 306 cities fetched with `$http`', function () {

            expect(ctrl.cities).toBeUndefined();

            $httpBackend.flush();

            expect(ctrl.cities.length).toBe(306);

        });
    });
});
